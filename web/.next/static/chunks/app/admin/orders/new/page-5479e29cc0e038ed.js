(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[423],{937:(e,t,s)=>{Promise.resolve().then(s.bind(s,6445))},6445:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>f});var r=s(5155),a=s(2520),o=s(4085),d=s(5007),i=s(2336),l=s(5785),n=s(745),c=s(371),u=s(241),h=s(5739),p=s(6046),m=s(2115);let y={"rentkar-mumbai":{address:"303,304 Royal Enclave Parsi Panchayat Road, Old Nagardas Rd, Mumbai, Maharashtra 400069",lat:19.125401,lng:72.852493}};function f(){let e=(0,p.useRouter)(),[t,s]=(0,m.useState)(""),[f,g]=(0,m.useState)(""),[j,x]=(0,m.useState)(""),[v,E]=(0,m.useState)(""),[S,A]=(0,m.useState)(""),[T,O]=(0,m.useState)(!1),b=async e=>{try{let t="AIzaSyBD47O77kr98i4ibhYozjFbGE9Pnfw4qk8";if(!t)throw Error("Google Maps API key is not configured");let s=await fetch("https://maps.googleapis.com/maps/api/geocode/json?address=".concat(encodeURIComponent(e),"&key=").concat(t)),r=await s.json();if(console.log(r),"OK"===r.status&&r.results&&r.results.length>0)return{lat:r.results[0].geometry.location.lat,lng:r.results[0].geometry.location.lng};if("ZERO_RESULTS"===r.status)throw Error("Address not found. Please check the address and try again.");if("REQUEST_DENIED"===r.status)throw Error("Google Maps API request denied. Please check your API key.");throw Error("Geocoding failed: ".concat(r.status))}catch(e){throw console.error("Geocoding error:",e),Error("Failed to convert address to coordinates")}},k=async s=>{s.preventDefault(),O(!0);try{if(!j)throw Error("Please select a pickup address");let s=y[j],r=await b(v),a={customer:t,customerPhone:f,pickupAddress:s.address,pickupAddressCord:{type:"Point",coordinates:[s.lng,s.lat]},deliveryAddress:v,deliveryAddressCord:{type:"Point",coordinates:[r.lng,r.lat]},items:S.split("\n").filter(e=>""!==e.trim())};await h.gH.create(a),(0,u.oR)({title:"Order created",description:"Order has been created successfully."}),e.push("/admin/dashboard")}catch(e){console.error("Create order error:",e),(0,u.oR)({title:"Failed to create order",description:e instanceof Error?e.message:"There was a problem creating the order.",variant:"destructive"})}finally{O(!1)}};return(0,r.jsx)(a.A,{children:(0,r.jsxs)("div",{className:"flex-1 space-y-4 p-4 md:p-8 pt-6",children:[(0,r.jsx)("div",{className:"flex items-center justify-between",children:(0,r.jsx)("h2",{className:"text-3xl font-bold tracking-tight",children:"Create New Order"})}),(0,r.jsx)(d.Zp,{children:(0,r.jsxs)("form",{onSubmit:k,children:[(0,r.jsxs)(d.aR,{children:[(0,r.jsx)(d.ZB,{children:"Order Details"}),(0,r.jsx)(d.BT,{children:"Enter the details for the new delivery order"})]}),(0,r.jsxs)(d.Wu,{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(l.J,{htmlFor:"customerName",children:"Customer Name"}),(0,r.jsx)(i.p,{id:"customerName",value:t,onChange:e=>s(e.target.value),required:!0})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(l.J,{htmlFor:"customerPhone",children:"Customer Phone"}),(0,r.jsx)(i.p,{id:"customerPhone",value:f,onChange:e=>g(e.target.value),required:!0})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(l.J,{htmlFor:"pickupAddress",children:"Pickup Address"}),(0,r.jsxs)(n.l6,{value:j,onValueChange:x,required:!0,children:[(0,r.jsx)(n.bq,{children:(0,r.jsx)(n.yv,{placeholder:"Select pickup address"})}),(0,r.jsx)(n.gC,{children:(0,r.jsx)(n.eb,{value:"rentkar-mumbai",children:"Rentkar Mumbai - 303,304 Royal Enclave Parsi Panchayat Road, Old Nagardas Rd, Mumbai, Maharashtra 400069"})})]})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(l.J,{htmlFor:"deliveryAddress",children:"Delivery Address"}),(0,r.jsx)(c.T,{id:"deliveryAddress",value:v,onChange:e=>E(e.target.value),placeholder:"Enter the complete delivery address...",required:!0})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(l.J,{htmlFor:"items",children:"Items (one per line)"}),(0,r.jsx)(c.T,{id:"items",value:S,onChange:e=>A(e.target.value),placeholder:"Laptop - 1 unit Headphones - 2 units",required:!0,rows:4})]})]}),(0,r.jsxs)(d.wL,{className:"flex justify-between",children:[(0,r.jsx)(o.$,{type:"button",variant:"outline",onClick:()=>e.push("/admin/dashboard"),children:"Cancel"}),(0,r.jsx)(o.$,{type:"submit",disabled:T,children:T?"Creating...":"Create Order"})]})]})})]})})}},241:(e,t,s)=>{"use strict";s.d(t,{dj:()=>h,oR:()=>u});var r=s(2115);let a=0,o=new Map,d=e=>{if(o.has(e))return;let t=setTimeout(()=>{o.delete(e),c({type:"REMOVE_TOAST",toastId:e})},1e6);o.set(e,t)},i=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:s}=t;return s?d(s):e.toasts.forEach(e=>{d(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===s||void 0===s?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},l=[],n={toasts:[]};function c(e){n=i(n,e),l.forEach(e=>{e(n)})}function u(e){let{...t}=e,s=(a=(a+1)%Number.MAX_SAFE_INTEGER).toString(),r=()=>c({type:"DISMISS_TOAST",toastId:s});return c({type:"ADD_TOAST",toast:{...t,id:s,open:!0,onOpenChange:e=>{e||r()}}}),{id:s,dismiss:r,update:e=>c({type:"UPDATE_TOAST",toast:{...e,id:s}})}}function h(){let[e,t]=r.useState(n);return r.useEffect(()=>(l.push(t),()=>{let e=l.indexOf(t);e>-1&&l.splice(e,1)}),[e]),{...e,toast:u,dismiss:e=>c({type:"DISMISS_TOAST",toastId:e})}}}},e=>{var t=t=>e(e.s=t);e.O(0,[365,173,598,961,452,441,517,358],()=>t(937)),_N_E=e.O()}]);