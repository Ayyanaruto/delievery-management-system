(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[934],{5330:(e,t,r)=>{Promise.resolve().then(r.bind(r,9736))},9736:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>h});var a=r(5155),s=r(2520),n=r(4085),l=r(5007),i=r(2336),d=r(5785),c=r(5739),o=r(7364),m=r(6046),u=r(2115);function h(){let e=(0,m.useRouter)(),t=(0,m.useParams)().id,[r,h]=(0,u.useState)(null),[p,f]=(0,u.useState)(!0),[x,g]=(0,u.useState)(!1),[y,v]=(0,u.useState)({name:"",email:"",phone:""}),[b,N]=(0,u.useState)({});(0,u.useEffect)(()=>{let e=async()=>{try{let e=(await c.cs.getById(t)).data;h(e),v({name:e.name||"",email:e.email||"",phone:e.phone||""})}catch(e){console.error("Error fetching partner:",e)}finally{f(!1)}};t&&e()},[t]);let j=()=>{let e={};return y.name.trim()||(e.name="Name is required"),y.email.trim()?/\S+@\S+\.\S+/.test(y.email)||(e.email="Email is invalid"):e.email="Email is required",y.phone.trim()?/^\+?[\d\s-()]+$/.test(y.phone)||(e.phone="Phone number is invalid"):e.phone="Phone is required",N(e),0===Object.keys(e).length},w=async r=>{if(r.preventDefault(),j()){g(!0);try{await c.cs.update(t,y),e.push("/admin/partners/".concat(t))}catch(e){console.error("Error updating partner:",e),N({submit:"Failed to update partner. Please try again."})}finally{g(!1)}}},k=(e,t)=>{v(r=>({...r,[e]:t})),b[e]&&N(t=>({...t,[e]:""}))};return p?(0,a.jsx)(s.A,{children:(0,a.jsx)("div",{className:"flex-1 p-8 flex items-center justify-center",children:(0,a.jsx)("p",{children:"Loading partner details..."})})}):r?(0,a.jsx)(s.A,{children:(0,a.jsxs)("div",{className:"flex-1 space-y-4 p-4 md:p-8 pt-6",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsxs)(n.$,{variant:"ghost",size:"sm",onClick:()=>e.back(),className:"flex items-center gap-2",children:[(0,a.jsx)(o.A,{className:"h-4 w-4"}),"Back"]}),(0,a.jsx)("h2",{className:"text-3xl font-bold tracking-tight",children:"Update Partner"})]}),(0,a.jsx)("div",{className:"max-w-2xl",children:(0,a.jsxs)(l.Zp,{children:[(0,a.jsx)(l.aR,{children:(0,a.jsx)(l.ZB,{children:"Partner Information"})}),(0,a.jsx)(l.Wu,{children:(0,a.jsxs)("form",{onSubmit:w,className:"space-y-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(d.J,{htmlFor:"name",children:"Name"}),(0,a.jsx)(i.p,{id:"name",type:"text",value:y.name,onChange:e=>k("name",e.target.value),placeholder:"Enter partner name",className:b.name?"border-red-500":""}),b.name&&(0,a.jsx)("p",{className:"text-sm text-red-500",children:b.name})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(d.J,{htmlFor:"email",children:"Email"}),(0,a.jsx)(i.p,{id:"email",type:"email",value:y.email,onChange:e=>k("email",e.target.value),placeholder:"Enter email address",className:b.email?"border-red-500":""}),b.email&&(0,a.jsx)("p",{className:"text-sm text-red-500",children:b.email})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(d.J,{htmlFor:"phone",children:"Phone"}),(0,a.jsx)(i.p,{id:"phone",type:"tel",value:y.phone,onChange:e=>k("phone",e.target.value),placeholder:"Enter phone number",className:b.phone?"border-red-500":""}),b.phone&&(0,a.jsx)("p",{className:"text-sm text-red-500",children:b.phone})]}),b.submit&&(0,a.jsx)("p",{className:"text-sm text-red-500",children:b.submit}),(0,a.jsxs)("div",{className:"flex gap-4 pt-4",children:[(0,a.jsx)(n.$,{type:"submit",disabled:x,className:"flex-1",children:x?"Updating...":"Update Partner"}),(0,a.jsx)(n.$,{type:"button",variant:"outline",onClick:()=>e.back(),className:"flex-1",children:"Cancel"})]})]})})]})})]})}):(0,a.jsx)(s.A,{children:(0,a.jsx)("div",{className:"flex-1 p-8 flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("p",{className:"text-lg text-gray-600 mb-4",children:"Partner not found"}),(0,a.jsx)(n.$,{onClick:()=>e.push("/admin/partners"),children:"Back to Partners"})]})})})}},2520:(e,t,r)=>{"use strict";r.d(t,{A:()=>x});var a=r(5155),s=r(4085),n=r(719),l=r(767),i=r(858),d=r(2823),c=r(5236),o=r(6710),m=r(8173),u=r.n(m),h=r(6046),p=r(2115),f=r(2689);function x(e){let{children:t}=e,r=(0,h.useRouter)(),[m,x]=(0,p.useState)(!1);(0,p.useEffect)(()=>{let e=localStorage.getItem("user");if(!e){r.push("/login");return}JSON.parse(e).role!==f.X.ADMIN&&r.push("/login")},[r]);let g=(0,p.useCallback)(()=>{localStorage.removeItem("user"),r.push("/login")},[r]);return(0,p.useEffect)(()=>{let e=()=>{let e=localStorage.getItem("user");if(e){let t=JSON.parse(e).loginTime||Date.now();Date.now()-t>864e5&&g()}};e();let t=setInterval(e,36e5);return()=>clearInterval(t)},[g]),(0,a.jsxs)("div",{className:"flex min-h-screen bg-gray-50",children:[m&&(0,a.jsx)("div",{className:"fixed inset-0 z-40 bg-black/50 lg:hidden",onClick:()=>x(!1)}),(0,a.jsx)("aside",{className:"fixed inset-y-0 left-0 z-50 w-64 bg-white border-r transform transition-transform duration-200 ease-in-out lg:translate-x-0 lg:static lg:z-auto ".concat(m?"translate-x-0":"-translate-x-full"),children:(0,a.jsxs)("div",{className:"flex flex-col h-full",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between h-16 px-4 border-b",children:[(0,a.jsxs)(u(),{href:"/admin/dashboard",className:"flex items-center",children:[(0,a.jsx)(n.A,{className:"h-6 w-6 text-primary mr-2"}),(0,a.jsx)("span",{className:"font-bold text-lg",children:"Rentkar Admin"})]}),(0,a.jsx)(s.$,{variant:"ghost",size:"icon",onClick:()=>x(!1),className:"lg:hidden",children:(0,a.jsx)(l.A,{className:"h-5 w-5"})})]}),(0,a.jsxs)("nav",{className:"flex-1 p-4 space-y-1",children:[(0,a.jsxs)(u(),{href:"/admin/dashboard",className:"flex items-center px-4 py-2 text-gray-700 rounded-md hover:bg-gray-100",children:[(0,a.jsx)(i.A,{className:"h-5 w-5 mr-3"}),"Dashboard"]}),(0,a.jsxs)(u(),{href:"/admin/orders/new",className:"flex items-center px-4 py-2 text-gray-700 rounded-md hover:bg-gray-100",children:[(0,a.jsx)(n.A,{className:"h-5 w-5 mr-3"}),"Create Order"]}),(0,a.jsxs)(u(),{href:"/admin/dashboard?tab=partners",className:"flex items-center px-4 py-2 text-gray-700 rounded-md hover:bg-gray-100",children:[(0,a.jsx)(d.A,{className:"h-5 w-5 mr-3"}),"Delivery Partners"]})]}),(0,a.jsx)("div",{className:"p-4 border-t",children:(0,a.jsxs)(s.$,{variant:"outline",className:"w-full justify-start",onClick:g,children:[(0,a.jsx)(c.A,{className:"h-5 w-5 mr-2"}),"Logout"]})})]})}),(0,a.jsxs)("div",{className:"flex-1 flex flex-col",children:[(0,a.jsxs)("header",{className:"h-16 border-b bg-white flex items-center px-4 lg:px-6",children:[(0,a.jsx)(s.$,{variant:"ghost",size:"icon",onClick:()=>x(!0),className:"lg:hidden",children:(0,a.jsx)(o.A,{className:"h-5 w-5"})}),(0,a.jsx)("div",{className:"ml-auto flex items-center space-x-2",children:(0,a.jsx)("span",{className:"text-sm font-medium",children:"Admin"})})]}),(0,a.jsx)("main",{className:"flex-1",children:t})]})]})}},4085:(e,t,r)=>{"use strict";r.d(t,{$:()=>c});var a=r(5155),s=r(2115),n=r(2317),l=r(1027),i=r(9602);let d=(0,l.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),c=s.forwardRef((e,t)=>{let{className:r,variant:s,size:l,asChild:c=!1,...o}=e,m=c?n.DX:"button";return(0,a.jsx)(m,{className:(0,i.cn)(d({variant:s,size:l,className:r})),ref:t,...o})});c.displayName="Button"},5007:(e,t,r)=>{"use strict";r.d(t,{BT:()=>c,Wu:()=>o,ZB:()=>d,Zp:()=>l,aR:()=>i,wL:()=>m});var a=r(5155),s=r(2115),n=r(9602);let l=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("rounded-xl border bg-card text-card-foreground shadow",r),...s})});l.displayName="Card";let i=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",r),...s})});i.displayName="CardHeader";let d=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("font-semibold leading-none tracking-tight",r),...s})});d.displayName="CardTitle";let c=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("text-sm text-muted-foreground",r),...s})});c.displayName="CardDescription";let o=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("p-6 pt-0",r),...s})});o.displayName="CardContent";let m=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("flex items-center p-6 pt-0",r),...s})});m.displayName="CardFooter"},2336:(e,t,r)=>{"use strict";r.d(t,{p:()=>l});var a=r(5155),s=r(2115),n=r(9602);let l=s.forwardRef((e,t)=>{let{className:r,type:s,...l}=e;return(0,a.jsx)("input",{type:s,className:(0,n.cn)("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-base shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",r),ref:t,...l})});l.displayName="Input"},5785:(e,t,r)=>{"use strict";r.d(t,{J:()=>c});var a=r(5155),s=r(2115),n=r(6195),l=r(1027),i=r(9602);let d=(0,l.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),c=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)(n.b,{ref:t,className:(0,i.cn)(d(),r),...s})});c.displayName=n.b.displayName},5739:(e,t,r)=>{"use strict";async function a(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=localStorage.getItem("token"),a={"Content-Type":"application/json",...t.headers?Object.fromEntries(new Headers(t.headers).entries()):{}};r&&(a.Authorization="Bearer ".concat(r));try{let r=await fetch("".concat("http://localhost:5000/api/v1").concat(e),{...t,headers:a}),s=r.headers.get("content-type");if(!s||!s.includes("application/json"))throw Error("Server returned ".concat(r.status,": ").concat(r.statusText));let n=await r.json();if(!r.ok)throw Error(n.message||"HTTP ".concat(r.status,": ").concat(r.statusText));return n}catch(e){if(e instanceof TypeError&&e.message.includes("fetch"))throw Error("Unable to connect to server. Please check if the server is running.");throw e}}r.d(t,{R2:()=>s,cs:()=>n,gH:()=>l});let s={login:async(e,t)=>a("/auth/login",{method:"POST",body:JSON.stringify({email:e,password:t})}),register:async e=>a("/auth/register",{method:"POST",body:JSON.stringify(e)}),getCurrentUser:async()=>a("/auth/me")},n={getAll:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=new URLSearchParams(e).toString();return a("/partners".concat(t?"?".concat(t):""))},getById:async e=>a("/partners/".concat(e)),update:async(e,t)=>a("/partners/".concat(e),{method:"PUT",body:JSON.stringify(t)}),updateStatus:async(e,t)=>a("/partners/".concat(e,"/status"),{method:"PATCH",body:JSON.stringify({status:t})}),deletePartner:async e=>a("/partners/".concat(e),{method:"DELETE"})},l={getAll:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=new URLSearchParams(e).toString();return a("/orders".concat(t?"?".concat(t):""))},getById:async e=>a("/orders/".concat(e)),create:async e=>a("/orders",{method:"POST",body:JSON.stringify(e)}),update:async(e,t)=>a("/orders/".concat(e),{method:"PUT",body:JSON.stringify(t)}),delete:async e=>a("/orders/".concat(e),{method:"DELETE"}),assign:async(e,t)=>a("/orders/".concat(e,"/assign"),{method:"PATCH",body:JSON.stringify({partnerId:t})}),unassign:async e=>a("/orders/".concat(e,"/unassign"),{method:"PATCH"}),getPartnerOrders:async e=>a("/orders/partner/".concat(e)),updateStatus:async(e,t)=>a("/orders/".concat(e,"/status"),{method:"PATCH",body:JSON.stringify({status:t})})}},9602:(e,t,r)=>{"use strict";r.d(t,{cn:()=>n});var a=r(3463),s=r(9795);function n(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,s.QP)((0,a.$)(t))}},7401:(e,t,r)=>{"use strict";r.d(t,{A:()=>m});var a=r(2115);let s=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),n=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,r)=>r?r.toUpperCase():t.toLowerCase()),l=e=>{let t=n(e);return t.charAt(0).toUpperCase()+t.slice(1)},i=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.filter((e,t,r)=>!!e&&""!==e.trim()&&r.indexOf(e)===t).join(" ").trim()},d=e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0};var c={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let o=(0,a.forwardRef)((e,t)=>{let{color:r="currentColor",size:s=24,strokeWidth:n=2,absoluteStrokeWidth:l,className:o="",children:m,iconNode:u,...h}=e;return(0,a.createElement)("svg",{ref:t,...c,width:s,height:s,stroke:r,strokeWidth:l?24*Number(n)/Number(s):n,className:i("lucide",o),...!m&&!d(h)&&{"aria-hidden":"true"},...h},[...u.map(e=>{let[t,r]=e;return(0,a.createElement)(t,r)}),...Array.isArray(m)?m:[m]])}),m=(e,t)=>{let r=(0,a.forwardRef)((r,n)=>{let{className:d,...c}=r;return(0,a.createElement)(o,{ref:n,iconNode:t,className:i("lucide-".concat(s(l(e))),"lucide-".concat(e),d),...c})});return r.displayName=l(e),r}},7364:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(7401).A)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},858:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(7401).A)("layout-dashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]])},5236:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(7401).A)("log-out",[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]])},6710:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(7401).A)("menu",[["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 18h16",key:"19g7jn"}],["path",{d:"M4 6h16",key:"1o0s65"}]])},719:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(7401).A)("package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]])},2823:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(7401).A)("users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]])},767:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(7401).A)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},6046:(e,t,r)=>{"use strict";var a=r(6658);r.o(a,"useParams")&&r.d(t,{useParams:function(){return a.useParams}}),r.o(a,"useRouter")&&r.d(t,{useRouter:function(){return a.useRouter}})},2689:(e,t,r)=>{"use strict";r.d(t,{X:()=>a});var a=function(e){return e.ADMIN="ADMIN",e.PARTNER="PARTNER",e}({})},6195:(e,t,r)=>{"use strict";r.d(t,{b:()=>i});var a=r(2115),s=r(3360),n=r(5155),l=a.forwardRef((e,t)=>(0,n.jsx)(s.sG.label,{...e,ref:t,onMouseDown:t=>{var r;t.target.closest("button, input, select, textarea")||(null===(r=e.onMouseDown)||void 0===r||r.call(e,t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));l.displayName="Label";var i=l},3360:(e,t,r)=>{"use strict";r.d(t,{hO:()=>d,sG:()=>i});var a=r(2115),s=r(7650),n=r(2317),l=r(5155),i=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,t)=>{let r=(0,n.TL)(`Primitive.${t}`),s=a.forwardRef((e,a)=>{let{asChild:s,...n}=e,i=s?r:t;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,l.jsx)(i,{...n,ref:a})});return s.displayName=`Primitive.${t}`,{...e,[t]:s}},{});function d(e,t){e&&s.flushSync(()=>e.dispatchEvent(t))}}},e=>{var t=t=>e(e.s=t);e.O(0,[365,173,441,517,358],()=>t(5330)),_N_E=e.O()}]);