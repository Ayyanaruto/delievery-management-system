(()=>{var e={};e.id=648,e.ids=[648],e.modules={846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},9121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},9294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},3033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},3873:e=>{"use strict";e.exports=require("path")},7561:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>n.a,__next_app__:()=>u,pages:()=>o,routeModule:()=>m,tree:()=>c});var r=t(260),a=t(8203),l=t(5155),n=t.n(l),i=t(7292),d={};for(let e in i)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>i[e]);t.d(s,d);let c=["",{children:["partner",{children:["dashboard",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,8114)),"/home/Ayyan/Desktop/rentkar/web/app/partner/dashboard/page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,9611)),"/home/Ayyan/Desktop/rentkar/web/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,9937,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(t.t.bind(t,9116,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(t.t.bind(t,1485,23)),"next/dist/client/components/unauthorized-error"]}],o=["/home/Ayyan/Desktop/rentkar/web/app/partner/dashboard/page.tsx"],u={require:t,loadChunk:()=>Promise.resolve()},m=new r.AppPageRouteModule({definition:{kind:a.RouteKind.APP_PAGE,page:"/partner/dashboard/page",pathname:"/partner/dashboard",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},5922:(e,s,t)=>{Promise.resolve().then(t.bind(t,8114))},5306:(e,s,t)=>{Promise.resolve().then(t.bind(t,5998))},5998:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>g});var r=t(5512),a=t(4658),l=t(7021),n=t(7643),i=t(9193),d=t(801),c=t(3567),o=t(7798),u=t(985),m=t(6583),x=t(8857),p=t(5670),h=t(9334),f=t(8009);let j=(0,p.default)(async()=>{},{loadableGenerated:{modules:["app/partner/dashboard/page.tsx -> @/components/order-map"]},ssr:!1,loading:()=>(0,r.jsx)("div",{className:"h-64 bg-gray-100 rounded-md flex items-center justify-center",children:"Loading map..."})});function g(){let e=(0,h.useRouter)(),[s,t]=(0,f.useState)([]),[p,g]=(0,f.useState)([]),[v,y]=(0,f.useState)(null),[b,N]=(0,f.useState)(!0),A=async(e,r)=>{try{let a=await c.gH.updateStatus(e,r);if(!a.success)throw Error(a.message||"Failed to update status");if("delivered"===r){let r=s.find(s=>(s._id||s.id)===e);r&&(g(e=>[...e,{...r,status:"delivered"}]),t(s=>s.filter(s=>(s._id||s.id)!==e)))}else"in_progress"===r&&t(s=>s.map(s=>(s._id||s.id)===e?{...s,status:"in_progress"}:s));(0,d.oR)({title:"Status updated",description:`Order #${e} has been marked as ${r.replace("_"," ")}.`})}catch(s){console.error("Failed to update status:",s);let e=s instanceof Error?s.message:"There was a problem updating the order status.";(0,d.oR)({title:"Failed to update status",description:e,variant:"destructive"})}},w=async()=>{if(v)try{let e=v.status,s="AVAILABLE"===e?"OFFLINE":"AVAILABLE",t=await c.cs.updateStatus(v._id,s);if(!t.success)throw Error(t.message||"Failed to update status");y(e=>e?{...e,status:s}:null),(0,d.oR)({title:"Status updated",description:`You are now ${s.toLowerCase()}.`})}catch(e){console.error("Failed to update availability:",e),(0,d.oR)({title:"Failed to update status",description:"There was a problem updating your availability status.",variant:"destructive"})}};return b?(0,r.jsx)(a.A,{children:(0,r.jsx)("div",{className:"flex-1 p-8 flex items-center justify-center",children:(0,r.jsx)("p",{children:"Loading dashboard data..."})})}):(0,r.jsx)(a.A,{children:(0,r.jsxs)("div",{className:"flex-1 space-y-4 p-4 md:p-8 pt-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("h2",{className:"text-3xl font-bold tracking-tight",children:"Delivery Dashboard"}),(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsxs)(l.$,{variant:"outline",onClick:()=>e.push("/partner/profile"),children:[(0,r.jsx)(o.A,{className:"mr-2 h-4 w-4"}),"Profile"]}),(0,r.jsx)(l.$,{variant:v?.status==="AVAILABLE"?"default":"outline",onClick:w,children:v?.status==="AVAILABLE"?"Available":"Offline"})]})]}),(0,r.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[(0,r.jsxs)(n.Zp,{children:[(0,r.jsxs)(n.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,r.jsx)(n.ZB,{className:"text-sm font-medium",children:"Assigned Orders"}),(0,r.jsx)(u.A,{className:"h-4 w-4 text-muted-foreground"})]}),(0,r.jsxs)(n.Wu,{children:[(0,r.jsx)("div",{className:"text-2xl font-bold",children:s.length}),(0,r.jsx)("p",{className:"text-xs text-muted-foreground",children:"Orders waiting to be delivered"})]})]}),(0,r.jsxs)(n.Zp,{children:[(0,r.jsxs)(n.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,r.jsx)(n.ZB,{className:"text-sm font-medium",children:"Completed Orders"}),(0,r.jsx)(m.A,{className:"h-4 w-4 text-muted-foreground"})]}),(0,r.jsxs)(n.Wu,{children:[(0,r.jsx)("div",{className:"text-2xl font-bold",children:p.length}),(0,r.jsx)("p",{className:"text-xs text-muted-foreground",children:"Successfully delivered orders"})]})]})]}),(0,r.jsxs)(n.Zp,{children:[(0,r.jsxs)(n.aR,{children:[(0,r.jsx)(n.ZB,{children:"Delivery Map"}),(0,r.jsx)(n.BT,{children:"View your assigned deliveries on the map"})]}),(0,r.jsx)(n.Wu,{className:"p-0",children:(0,r.jsx)(j,{orders:s})})]}),(0,r.jsxs)(i.tU,{defaultValue:"assigned",children:[(0,r.jsxs)(i.j7,{children:[(0,r.jsx)(i.Xi,{value:"assigned",children:"Assigned Orders"}),(0,r.jsx)(i.Xi,{value:"completed",children:"Completed Orders"})]}),(0,r.jsx)(i.av,{value:"assigned",className:"space-y-4",children:(0,r.jsxs)(n.Zp,{children:[(0,r.jsxs)(n.aR,{children:[(0,r.jsx)(n.ZB,{children:"Assigned Orders"}),(0,r.jsx)(n.BT,{children:"Orders assigned to you for delivery"})]}),(0,r.jsx)(n.Wu,{children:0===s.length?(0,r.jsx)("div",{className:"text-center py-8",children:(0,r.jsx)("p",{className:"text-gray-500",children:"No assigned orders"})}):(0,r.jsx)("div",{className:"space-y-4",children:s.map(s=>{let t=s._id||s.id||"";return(0,r.jsxs)("div",{className:"border rounded-lg p-4",children:[(0,r.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,r.jsxs)("h3",{className:"font-medium",children:["Order #",t]}),(0,r.jsx)("span",{className:"px-2 py-1 text-xs font-semibold rounded-full bg-blue-100 text-blue-800",children:s.status?.charAt(0).toUpperCase()+s.status?.slice(1).replace("_"," ")||"Assigned"})]}),(0,r.jsxs)("div",{className:"space-y-2 mb-4",children:[(0,r.jsxs)("p",{className:"text-sm",children:[(0,r.jsx)("span",{className:"font-medium",children:"Customer:"})," ",s.customer]}),(0,r.jsxs)("p",{className:"text-sm",children:[(0,r.jsx)("span",{className:"font-medium",children:"Phone:"})," ",s.customerPhone]}),(0,r.jsxs)("div",{className:"text-sm",children:[(0,r.jsx)("span",{className:"font-medium",children:"Pickup:"}),(0,r.jsxs)("div",{className:"flex items-start mt-1",children:[(0,r.jsx)(x.A,{className:"h-4 w-4 text-gray-400 mr-1 mt-0.5"}),(0,r.jsx)("span",{children:s.pickupAddress})]})]}),(0,r.jsxs)("div",{className:"text-sm",children:[(0,r.jsx)("span",{className:"font-medium",children:"Delivery:"}),(0,r.jsxs)("div",{className:"flex items-start mt-1",children:[(0,r.jsx)(x.A,{className:"h-4 w-4 text-gray-400 mr-1 mt-0.5"}),(0,r.jsx)("span",{children:s.deliveryAddress})]})]})]}),(0,r.jsxs)("div",{className:"flex justify-end space-x-2",children:[(0,r.jsx)(l.$,{variant:"outline",size:"sm",onClick:()=>e.push(`/partner/orders/${t}`),children:"View Details"}),"assigned"===s.status&&(0,r.jsx)(l.$,{size:"sm",variant:"outline",onClick:()=>A(t,"in_progress"),children:"Mark as Picked Up"}),"in_progress"===s.status&&(0,r.jsx)(l.$,{size:"sm",onClick:()=>A(t,"delivered"),children:"Mark as Delivered"})]})]},t)})})})]})}),(0,r.jsx)(i.av,{value:"completed",className:"space-y-4",children:(0,r.jsxs)(n.Zp,{children:[(0,r.jsxs)(n.aR,{children:[(0,r.jsx)(n.ZB,{children:"Completed Orders"}),(0,r.jsx)(n.BT,{children:"Orders you have successfully delivered"})]}),(0,r.jsx)(n.Wu,{children:0===p.length?(0,r.jsx)("div",{className:"text-center py-8",children:(0,r.jsx)("p",{className:"text-gray-500",children:"No completed orders"})}):(0,r.jsx)("div",{className:"space-y-4",children:p.map(s=>{let t=s._id||s.id||"";return(0,r.jsxs)("div",{className:"border rounded-lg p-4",children:[(0,r.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,r.jsxs)("h3",{className:"font-medium",children:["Order #",t]}),(0,r.jsx)("span",{className:"px-2 py-1 text-xs font-semibold rounded-full bg-green-100 text-green-800",children:"Delivered"})]}),(0,r.jsxs)("div",{className:"space-y-2 mb-4",children:[(0,r.jsxs)("p",{className:"text-sm",children:[(0,r.jsx)("span",{className:"font-medium",children:"Customer:"})," ",s.customer]}),(0,r.jsxs)("div",{className:"text-sm",children:[(0,r.jsx)("span",{className:"font-medium",children:"Delivery:"}),(0,r.jsxs)("div",{className:"flex items-start mt-1",children:[(0,r.jsx)(x.A,{className:"h-4 w-4 text-gray-400 mr-1 mt-0.5"}),(0,r.jsx)("span",{children:s.deliveryAddress})]})]})]}),(0,r.jsx)("div",{className:"flex justify-end",children:(0,r.jsx)(l.$,{variant:"outline",size:"sm",onClick:()=>e.push(`/partner/orders/${t}`),children:"View Details"})})]},t)})})})]})})]})]})})}},4658:(e,s,t)=>{"use strict";t.d(s,{A:()=>f});var r=t(5512),a=t(7021),l=t(985),n=t(4269),i=t(8193);let d=(0,t(1680).A)("map",[["path",{d:"M14.106 5.553a2 2 0 0 0 1.788 0l3.659-1.83A1 1 0 0 1 21 4.619v12.764a1 1 0 0 1-.553.894l-4.553 2.277a2 2 0 0 1-1.788 0l-4.212-2.106a2 2 0 0 0-1.788 0l-3.659 1.83A1 1 0 0 1 3 19.381V6.618a1 1 0 0 1 .553-.894l4.553-2.277a2 2 0 0 1 1.788 0z",key:"169xi5"}],["path",{d:"M15 5.764v15",key:"1pn4in"}],["path",{d:"M9 3.236v15",key:"1uimfh"}]]);var c=t(7798),o=t(722),u=t(6438),m=t(8531),x=t.n(m),p=t(9334),h=t(8009);function f({children:e}){let s=(0,p.useRouter)(),[t,m]=(0,h.useState)(!1),f=(0,h.useCallback)(()=>{localStorage.removeItem("user"),s.push("/login")},[s]);return(0,r.jsxs)("div",{className:"flex min-h-screen bg-gray-50",children:[t&&(0,r.jsx)("div",{className:"fixed inset-0 z-40 bg-black/50 lg:hidden",onClick:()=>m(!1)}),(0,r.jsx)("aside",{className:`fixed inset-y-0 left-0 z-50 w-64 bg-white border-r transform transition-transform duration-200 ease-in-out lg:translate-x-0 lg:static lg:z-auto ${t?"translate-x-0":"-translate-x-full"}`,children:(0,r.jsxs)("div",{className:"flex flex-col h-full",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between h-16 px-4 border-b",children:[(0,r.jsxs)(x(),{href:"/partner/dashboard",className:"flex items-center",children:[(0,r.jsx)(l.A,{className:"h-6 w-6 text-primary mr-2"}),(0,r.jsx)("span",{className:"font-bold text-lg",children:"Rentkar Partner"})]}),(0,r.jsx)(a.$,{variant:"ghost",size:"icon",onClick:()=>m(!1),className:"lg:hidden",children:(0,r.jsx)(n.A,{className:"h-5 w-5"})})]}),(0,r.jsxs)("nav",{className:"flex-1 p-4 space-y-1",children:[(0,r.jsxs)(x(),{href:"/partner/dashboard",className:"flex items-center px-4 py-2 text-gray-700 rounded-md hover:bg-gray-100",children:[(0,r.jsx)(i.A,{className:"h-5 w-5 mr-3"}),"Dashboard"]}),(0,r.jsxs)(x(),{href:"/partner/dashboard?tab=assigned",className:"flex items-center px-4 py-2 text-gray-700 rounded-md hover:bg-gray-100",children:[(0,r.jsx)(l.A,{className:"h-5 w-5 mr-3"}),"Assigned Orders"]}),(0,r.jsxs)(x(),{href:"/partner/dashboard?tab=map",className:"flex items-center px-4 py-2 text-gray-700 rounded-md hover:bg-gray-100",children:[(0,r.jsx)(d,{className:"h-5 w-5 mr-3"}),"Delivery Map"]}),(0,r.jsxs)(x(),{href:"/partner/profile",className:"flex items-center px-4 py-2 text-gray-700 rounded-md hover:bg-gray-100",children:[(0,r.jsx)(c.A,{className:"h-5 w-5 mr-3"}),"Profile"]})]}),(0,r.jsx)("div",{className:"p-4 border-t",children:(0,r.jsxs)(a.$,{variant:"outline",className:"w-full justify-start",onClick:f,children:[(0,r.jsx)(o.A,{className:"h-5 w-5 mr-2"}),"Logout"]})})]})}),(0,r.jsxs)("div",{className:"flex-1 flex flex-col",children:[(0,r.jsxs)("header",{className:"h-16 border-b bg-white flex items-center px-4 lg:px-6",children:[(0,r.jsx)(a.$,{variant:"ghost",size:"icon",onClick:()=>m(!0),className:"lg:hidden",children:(0,r.jsx)(u.A,{className:"h-5 w-5"})}),(0,r.jsx)("div",{className:"ml-auto flex items-center space-x-2",children:(0,r.jsx)("span",{className:"text-sm font-medium",children:"Delivery Partner"})})]}),(0,r.jsx)("main",{className:"flex-1",children:e})]})]})}},9193:(e,s,t)=>{"use strict";t.d(s,{Xi:()=>c,av:()=>o,j7:()=>d,tU:()=>i});var r=t(5512),a=t(8009),l=t(5613),n=t(9462);let i=l.bL,d=a.forwardRef(({className:e,...s},t)=>(0,r.jsx)(l.B8,{ref:t,className:(0,n.cn)("inline-flex h-9 items-center justify-center rounded-lg bg-muted p-1 text-muted-foreground",e),...s}));d.displayName=l.B8.displayName;let c=a.forwardRef(({className:e,...s},t)=>(0,r.jsx)(l.l9,{ref:t,className:(0,n.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-md px-3 py-1 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow",e),...s}));c.displayName=l.l9.displayName;let o=a.forwardRef(({className:e,...s},t)=>(0,r.jsx)(l.UC,{ref:t,className:(0,n.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...s}));o.displayName=l.UC.displayName},6583:(e,s,t)=>{"use strict";t.d(s,{A:()=>r});let r=(0,t(1680).A)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},8857:(e,s,t)=>{"use strict";t.d(s,{A:()=>r});let r=(0,t(1680).A)("map-pin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]])},7798:(e,s,t)=>{"use strict";t.d(s,{A:()=>r});let r=(0,t(1680).A)("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},5670:(e,s,t)=>{"use strict";t.d(s,{default:()=>a.a});var r=t(6256),a=t.n(r)},6256:(e,s,t)=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),Object.defineProperty(s,"default",{enumerable:!0,get:function(){return a}});let r=t(5488)._(t(568));function a(e,s){var t;let a={};"function"==typeof e&&(a.loader=e);let l={...a,...s};return(0,r.default)({...l,modules:null==(t=l.loadableGenerated)?void 0:t.modules})}("function"==typeof s.default||"object"==typeof s.default&&null!==s.default)&&void 0===s.default.__esModule&&(Object.defineProperty(s.default,"__esModule",{value:!0}),Object.assign(s.default,s),e.exports=s.default)},3400:(e,s)=>{"use strict";function t(e){return e.split("/").map(e=>encodeURIComponent(e)).join("/")}Object.defineProperty(s,"__esModule",{value:!0}),Object.defineProperty(s,"encodeURIPath",{enumerable:!0,get:function(){return t}})},5771:(e,s,t)=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),Object.defineProperty(s,"BailoutToCSR",{enumerable:!0,get:function(){return a}});let r=t(4639);function a(e){let{reason:s,children:t}=e;throw new r.BailoutToCSRError(s)}},568:(e,s,t)=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),Object.defineProperty(s,"default",{enumerable:!0,get:function(){return c}});let r=t(5512),a=t(8009),l=t(5771),n=t(6054);function i(e){return{default:e&&"default"in e?e.default:e}}let d={loader:()=>Promise.resolve(i(()=>null)),loading:null,ssr:!0},c=function(e){let s={...d,...e},t=(0,a.lazy)(()=>s.loader().then(i)),c=s.loading;function o(e){let i=c?(0,r.jsx)(c,{isLoading:!0,pastDelay:!0,error:null}):null,d=!s.ssr||!!s.loading,o=d?a.Suspense:a.Fragment,u=s.ssr?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.PreloadChunks,{moduleIds:s.modules}),(0,r.jsx)(t,{...e})]}):(0,r.jsx)(l.BailoutToCSR,{reason:"next/dynamic",children:(0,r.jsx)(t,{...e})});return(0,r.jsx)(o,{...d?{fallback:i}:{},children:u})}return o.displayName="LoadableComponent",o}},6054:(e,s,t)=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),Object.defineProperty(s,"PreloadChunks",{enumerable:!0,get:function(){return i}});let r=t(5512),a=t(5740),l=t(9294),n=t(3400);function i(e){let{moduleIds:s}=e,t=l.workAsyncStorage.getStore();if(void 0===t)return null;let i=[];if(t.reactLoadableManifest&&s){let e=t.reactLoadableManifest;for(let t of s){if(!e[t])continue;let s=e[t].files;i.push(...s)}}return 0===i.length?null:(0,r.jsx)(r.Fragment,{children:i.map(e=>{let s=t.assetPrefix+"/_next/"+(0,n.encodeURIPath)(e);return e.endsWith(".css")?(0,r.jsx)("link",{precedence:"dynamic",href:s,rel:"stylesheet",as:"style"},e):((0,a.preload)(s,{as:"script",fetchPriority:"low"}),null)})})}},8114:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>r});let r=(0,t(6760).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/home/Ayyan/Desktop/rentkar/web/app/partner/dashboard/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/home/Ayyan/Desktop/rentkar/web/app/partner/dashboard/page.tsx","default")}};var s=require("../../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),r=s.X(0,[894,531,845,735],()=>t(7561));module.exports=r})();